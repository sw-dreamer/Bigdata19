## 1. 가상환경 설정

VS Code에서 터미널을 실행합니다.

![image](https://github.com/user-attachments/assets/9a5bbd42-2c5e-44f6-ade4-094b24cb6f74)

- **Python 버전** : 3.10
- **Numpy 버전** : v1 (v2는 딥러닝 연결 시 문제가 발생)
- **Pandas** (Numpy 엔진)
- **Matplotlib** : 데이터를 시각화하는 데 사용되는 기본적인 파이썬 라이브러리
- **Seaborn** : Matplotlib을 기반으로 구축된 고급 시각화 라이브러리

> 만약에 가상환경으로 들어가 있는 상태이면 `conda deactivate` 명령어로 나와서 이미지처럼 `(base)`를 만들어야 합니다.


```
conda deactivate
```

```
conda create -n dataproc python=3.10 numpy==1.23.4 pandas matplotlib
```

![image](https://github.com/user-attachments/assets/d0952000-9bb4-44d7-b847-b0360ff52581)


### 가상환경 활성화
```
conda activate dataproc
```

![image](https://github.com/user-attachments/assets/14200fe8-fb65-4ade-abdc-a13455a11b5e)

### 추가 설치 : pandas를 사용하려면 `ipykernel`이 필요하여 추가로 설치
```
conda install ipykernel
```
![image](https://github.com/user-attachments/assets/8b5afbb0-3a73-404b-b977-ca7bccf7dd9c)

가상환경에서 설치된 목록들 확인
```
conda list
```

![image](https://github.com/user-attachments/assets/5bef8d1e-dbec-46bf-b479-fc4a866f1cdd)

---

## 2. 파일 생성

`01_서울시 구별 CCTV 현황 분석.ipynb`로 파일을 생성 해줍니다.

![image](https://github.com/user-attachments/assets/93cb68ca-36d5-4ba8-bf81-e4dd6613a2eb)

`select kernel`에서 원하는 가상환경으로 갑니다.

## 3. 개념

### 01 사용시 구별 CCTV 현황 분석

**[학습목표]**

- 서울시 각 구별 CCTV 수를 파악하고, 인구 대비 CCTV 비율을 파악해서 순위 비교
- 인구 대비 CCTV의 평균치를 확인하고, CCTV가 과하게 부족한 구를 파악
- Pandas 사용법과 시각화(Matplotlib) 사용법을 숙지

### Pandas

- **Pandas** : Python의 데이터 분석 및 조작을 위한 라이브러리로, 표(데이터 프레임) 형식 데이터를 다루는 강력한 기능을 제공합니다.
  - 엑셀, SQL, CSV 등의 데이터를 불러와 정리, 분석, 변환, 저장하는 기능을 제공합니다.
  - 데이터 분석에 필요한 필수 라이브러리입니다.

#### 1. Pandas 핵심 구조

- Pandas에는 **Series**와 **DataFrame** 두 가지 주요 데이터 구조가 있습니다.

  1. **Series**
     - 1차원 데이터 처리시 사용됩니다.
     - 단일 컬럼 형태의 데이터 구조를 가지고 있으며, 리스트(list)나 배열(array)와 유사하고 인덱스를 사용하여 인덱싱 및 슬라이싱이 가능합니다.
     
  2. **DataFrame**
     - 2차원 데이터 처리시 사용됩니다.
     - 엑셀의 표와 같은 행(row)-열(col) 구조를 가지고 있으며, 여러 개의 Series(column)으로 구성됩니다.

### Series 속성 (변수)

- **index** : 인덱스를 저장 (array)
- **values** : 값을 저장 (array)
- **dtype** : 데이터 타입을 저장
- **name** : Series 오브젝트의 이름이며 데이터프레임의 컬럼명으로 사용

### Series 데이터 타입

- **index**, **value** 모두 array 형식으로 저장됩니다.
- **array 형식**은 Numpy에 저장됩니다.
  - 동일 데이터 타입만 저장됩니다.
  - 데이터 타입이 세분화되어 있으며, 정수, 실수, 문자열 등 다양한 데이터 타입이 존재합니다.

---

## 4. 실습

### 1. Series 실습

```
import pandas as pd

data = [1,2,3,4]

series = pd.Series(data) # Series의 데이터에 들어갈수 있는 것 : 리스트, 딕셔너리, 배열이 가능

print(series)
```
![image](https://github.com/user-attachments/assets/589e76a0-bd54-40ab-9661-86b1935c22f3)

```
import pandas as pd

data = [1,2,3,4]

series = pd.Series(data)

print('index :',series.index)
print('values :',series.values)
print('타입 : ',type(series.values))
print('name : ', series.name)

series.name = '컬럼명'
print('name : ', series.name)

```
![image](https://github.com/user-attachments/assets/7573a71c-a20f-4382-b9e5-194c1681b39f)


### 2. 데이터 프레임 실습
```
# 딕셔너리로 생성
import pandas as pd
data ={
    'Name': ['Alice', 'Bob', 'Charlie'],
    'Age': [25, 30, 35],
    'City': ['Seoul', 'Busan', 'Incheon']
}

df = pd.DataFrame(data)
print(df)
```
![image](https://github.com/user-attachments/assets/faca8f0b-6353-41df-9adf-98fc12fc19af)

```
# 특정 컬럼 선택
# 컬럼들 확인
import pandas as pd
data ={
    'Name': ['Alice', 'Bob', 'Charlie'],
    'Age': [25, 30, 35],
    'City': ['Seoul', 'Busan', 'Incheon']
}

df = pd.DataFrame(data)

print(df.columns)
```
![image](https://github.com/user-attachments/assets/33579cc4-5e35-452a-abf4-875ddb99bcc6)

```
# 특정 컬럼 선택
# 컬럼들 확인
import pandas as pd
data ={
    'Name': ['Alice', 'Bob', 'Charlie'],
    'Age': [25, 30, 35],
    'City': ['Seoul', 'Busan', 'Incheon']
}

df = pd.DataFrame(data)

print(df['Name'])
```
![image](https://github.com/user-attachments/assets/a8d39041-25b2-4bf6-ba3c-d01da4c00d64)

---

### 3. csv 읽고 처리하기

```
# cctv 현황 데이터 읽기
# 파일 : data_collection\data\01.CCTV_in_Seoul.csv
# csv 읽기 함수 : pandas.readcsv() => 데이터 프레임워크 타입으로 반환

import pandas as pd
import numpy as np

CCTV_Seoul = pd.read_csv(
    './data/01. CCTV_in_Seoul.csv',
    encoding='utf-8'
    )
print(CCTV_Seoul) # 전체 데이터 확인, 일반적으로는 상위 n개 혹은 하위 n개만 확인
```
![image](https://github.com/user-attachments/assets/c9c30370-dba7-4a3d-a8df-29cfa4026131)

```
import pandas as pd
import numpy as np

CCTV_Seoul = pd.read_csv(
    './data/01. CCTV_in_Seoul.csv',
    encoding='utf-8'
    )
print(type(CCTV_Seoul))
```
![image](https://github.com/user-attachments/assets/1b1288f7-1392-4641-bb50-e94c5e79ace7)

```
import pandas as pd
import numpy as np

CCTV_Seoul = pd.read_csv(
    './data/01. CCTV_in_Seoul.csv',
    encoding='utf-8'
    )
print(CCTV_Seoul.head())
```
![image](https://github.com/user-attachments/assets/e7a6594e-a1fe-41ac-91fb-2a7a1b625376)

```
import pandas as pd
import numpy as np

CCTV_Seoul = pd.read_csv(
    './data/01. CCTV_in_Seoul.csv',
    encoding='utf-8'
    )
print(CCTV_Seoul.tail())

```
![image](https://github.com/user-attachments/assets/d7d7b912-b0e2-412c-99c7-acccf8760dc5)

```
import pandas as pd
import numpy as np

# 행정보 추출
# CCTV_seoul.index : RangeIndex(start=0, stop=25, step=1) : 정수 인덱스
CCTV_Seoul = pd.read_csv(
    './data/01. CCTV_in_Seoul.csv',
    encoding='utf-8'
    )

print('CCTV_Seoul.index : ',CCTV_Seoul.index)

# 컬럼들 추출
print('CCTV_Seoul.columns:',CCTV_Seoul.columns)

# 컬럼들 추출
print('CCTV_Seoul.columns[0] : ',CCTV_Seoul.columns[0])

# 컬럼들 추출
print('CCTV_Seoul.columns[-1] : ',CCTV_Seoul.columns[-1])

# 구조 추출
print('CCTV_Seoul.shape :',CCTV_Seoul.shape) #(25,6) :25행 6개 컬럼

# 행 추출
print('CCTV_Seoul.shape[0] :',CCTV_Seoul.shape[0]) #데이터 개수 확인
print('CCTV_Seoul.shape[1] :',CCTV_Seoul.shape[1]) #컬럼의 개수 확인
```
![image](https://github.com/user-attachments/assets/d6a69787-5287-46a5-969c-04515701d0f0)

```
# 수치 데이터의 기본 통계량
CCTV_Seoul['기관명'] # 컬럼 추출 => Series object
print(type(CCTV_Seoul['기관명']))
```
![image](https://github.com/user-attachments/assets/07ef8f05-89e3-4ee4-82b3-c1196b9e5634)

```
# 수치 데이터의 기본 통계량

CCTV_Seoul['소계'].dtype # 컬럼 추출 => Series object => dtype, 64 byte는 메모리 낭비가 심하다
```
![image](https://github.com/user-attachments/assets/7735e6be-3b83-41e7-8dd2-56f93efaa4b8)

```
# 수치 데이터의 기본 통계량

CCTV_Seoul.describe()
```
![image](https://github.com/user-attachments/assets/7079356b-b121-4ef6-9927-cb828d084956)

```
# 데이터 전체 구조 확인 (DataFrame) : info()
CCTV_Seoul.info()
```
![image](https://github.com/user-attachments/assets/ed71bf7e-add2-424b-9833-300999f61277)

```
# 서울시 구별 CCTV 현황
# 컬럼명 수정 : 기관명 -> 구별
# 메소드 : rename()
import pandas as pd
import numpy as np

CCTV_Seoul = pd.read_csv(
    './data/01. CCTV_in_Seoul.csv',
    encoding='utf-8'
)

gu = {
    CCTV_Seoul.columns[0] : '구별'
}

CCTV_Seoul.rename(
    columns=gu
)
#근데 CCTV_Seoul 원본에서 복사해서 바꾸기 때문에 원본에 반영이 안됨
```
![image](https://github.com/user-attachments/assets/bd219c11-3442-42c6-afcd-b7f8b235a059)

![image](https://github.com/user-attachments/assets/95bd596a-48b5-464b-97d7-1a54f15829f7)

```
# 서울시 구별 CCTV 현황
# 컬럼명 수정 : 기관명 -> 구별
# 원본에 반영하는 방법은 2가지
# 1. 다시 대입 : 기관명 -> 구별

import pandas as pd
import numpy as np

CCTV_Seoul = pd.read_csv(
    './data/01. CCTV_in_Seoul.csv',
    encoding='utf-8'
)

gu = {
    CCTV_Seoul.columns[0] : '구별'
}

CCTV_Seoul =CCTV_Seoul.rename(columns=gu)

print(CCTV_Seoul)

```
![image](https://github.com/user-attachments/assets/60b6aaca-381a-4be8-82ae-cd6cac896ffd)

```

---

# 2. inplace라는 Arguement를 True로 주면 된다.
import pandas as pd
import numpy as np


CCTV_Seoul = pd.read_csv(
    './data/01. CCTV_in_Seoul.csv',
    encoding='utf-8'
)

gu = {
    CCTV_Seoul.columns[0] : '구별'
}

CCTV_Seoul.rename(columns=gu,inplace=True)

print(CCTV_Seoul)
```
![image](https://github.com/user-attachments/assets/7dcf0b88-62cd-43f5-8e5f-5678635fb9d1)

### 4. xls,xlsx 읽고 처리하기

```
import pandas as pd
import numpy as np

POP_Seoul=pd.read_excel(
    './data/01. population_in_Seoul.xls', # 파일의 경로와 파일명
    header=2
)

POP_Seoul
```
실행을 하면 아래와 같이 `ModuleNotFoundError: No module named 'xlrd'`가 발생합니다. 
![image](https://github.com/user-attachments/assets/e2a7b35e-5ad6-490d-aa64-803b8b26fda6)

그래서 터미널에 추가로 xlrd 모듈을 설치해야합니다.

![image](https://github.com/user-attachments/assets/c61b1278-2ce9-4bb5-a7b1-e41fc4c16bd2)

다시 위에 코드를 실행하면, 아래와 같이 정상적으로 실행이 됩니다.
![image](https://github.com/user-attachments/assets/2f841c27-b247-4f68-9ac5-09280342cf9f)

```
#header 설정을 안했을 경우
import pandas as pd
import numpy as np

POP_Seoul=pd.read_excel(
    './data/01. population_in_Seoul.xls' # 파일의 경로와 파일명
)

POP_Seoul
```
![image](https://github.com/user-attachments/assets/380df234-19b3-4c3b-985c-601ff24647ab)

```
import pandas as pd
import numpy as np

POP_Seoul=pd.read_excel(
    './data/01. population_in_Seoul.xls', # 파일의 경로와 파일명
    header=2
)

POP_Seoul.columns
```
![image](https://github.com/user-attachments/assets/b007b9e5-3f66-499c-a4e8-0d8365828849)

데이터 확인 시, 기간이 `2017.1/4`	로  동일하여 추후에는 삭제하고 , 자치구는 구별로 수정하며 주요하게 보는 데이터는 인구수이어서 세대 또한 삭제할 예정이고, 한국인과 외국인의 남녀에 대한 비율 또한 학습목표에 부적합하여 삭제를 진행할 예정이고, 세대당인구 또한 학습 목표에 부적합하여 삭제하여 데이터를 갖고 올 예정입니다.
```
import pandas as pd
import numpy as np

POP_Seoul=pd.read_excel(
    './data/01. population_in_Seoul.xls', # 파일의 경로와 파일명
    header=2
    , usecols='B,D,G,J,N'
)

POP_Seoul
```
![image](https://github.com/user-attachments/assets/c6343925-0b80-415c-bfb0-780433f7b674)

위의 이미지처럼 나오게 되는데, 컬럼명을 보기가 힘들어 `자치구`는 `구별`로 `계`는 `인구수`, `계.1`은 `한국인수`, `계.2`는 `외국인수`, `65세이상고령자`는 `고령자 수`로 바꿀 예정입니다.
```
#컬럼명 확인
import pandas as pd
import numpy as np

POP_Seoul=pd.read_excel(
    './data/01. population_in_Seoul.xls', # 파일의 경로와 파일명
    header=2
    , usecols='B,D,G,J,N'
)

POP_Seoul.columns
```
![image](https://github.com/user-attachments/assets/c6a47286-1b87-47ea-985a-18617c3ca53c)

```
import pandas as pd
import numpy as np

POP_Seoul=pd.read_excel(
    './data/01. population_in_Seoul.xls', # 파일의 경로와 파일명
    header=2
    , usecols='B,D,G,J,N'
)

columns= {
    POP_Seoul.columns[0] : '구별'
    ,POP_Seoul.columns[1] : '인구수'
    ,POP_Seoul.columns[2] : '한국인 수'
    ,POP_Seoul.columns[3] : '외국인 수'
    ,POP_Seoul.columns[4] : '고령자 수'
}
POP_Seoul.rename(columns=columns,inplace=True)
POP_Seoul
```
![image](https://github.com/user-attachments/assets/d34fc80c-7d37-4b9a-aeb7-5147fe464e21)

---

## 5. Pandas 기본

```
import pandas as pd
import numpy as np
#Series 생성
data =[
    10,20,30,40,50
]

series = pd.Series(data)
print(series)
```
![image](https://github.com/user-attachments/assets/938c0e5e-d212-4a14-a0a4-e10e8d753e73)

```
#인덱스 변경 방법
import pandas as pd
import numpy as np
#Series에 index 지정 방식이 두가지 있다.
# 1. 정수 인덱스 : Integer index
# 2. 문자열 인덱스 : named index
data =[
    10,20,30,40,50
]
index =[
    'A'
    ,'B'
    ,'C'
    ,'D'
    ,'E'
    ]
series = pd.Series(index=index,data=data)
series
```
![image](https://github.com/user-attachments/assets/4a5e03f0-5c4c-435c-813b-8191f70049c5)

```
import pandas as pd
import numpy as np
#Series에 index 지정 방식이 두가지 있다.
# 1. 정수 인덱스 : Integer index
# 2. 문자열 인덱스 : named index
data =[
    10,20,30,40,50
]
index =[
    'A'
    ,'B'
    ,'C'
    ,'D'
    ,'E'
    ] # 인덱스에 날짜 시간이 들어갈 수 있다.
series = pd.Series(index=index,data=data)
print(series['A'])
```
![image](https://github.com/user-attachments/assets/da7e5f44-7ab3-4b96-ad03-3b3ba75079b3)

```
import pandas as pd
import numpy as np

data_index ={
    'A' : 10,
    'B' : 20,
    'C' : 30,
    'D' : 40,
    'E' : 50
}
series = pd.Series(data_index)
print(series)
```
![image](https://github.com/user-attachments/assets/2b0cb1dd-d676-4bb9-a190-1f6ccc653669)

```
import pandas as pd
import numpy as np

#스칼라(단일) 값과 인덱스 list로 Series 생성
data=5
index=['A','B','C']
series = pd.Series(data=data,index=index)
print(series)
```
![image](https://github.com/user-attachments/assets/531786fe-ac9c-4b01-84e1-e879085bd80e)

```
import pandas as pd
import numpy as np

series = pd.Series(
    data=[1,2,3]
    ,index=['a','b','c']
    , name='sample_series'
    , dtype='int8'
)
print(series)
```
![image](https://github.com/user-attachments/assets/145e53dd-a7e5-40dd-a482-7ee4f7bc2b22)

```
import pandas as pd
import numpy as np
# Nan(not a number) : 결측치, 무한대 의미가 있다.
s = pd.Series(data=[3,5,np.nan,6,8]) # data argument가 첫번째
print(s)
```
![image](https://github.com/user-attachments/assets/78a19a25-834d-4b30-bf7e-9c72cc006ad8)

```
import pandas as pd
import numpy as np
#Pandas에서 날짜 시간 데이터 생성 : date_range()
dates = pd.date_range(
    start='2025-02-27'
    , periods=7
)
dates
```
![image](https://github.com/user-attachments/assets/16246149-c6ce-4249-b88c-44c26de44cdf)

```
import pandas as pd
import numpy as np
#Pandas에서 날짜 시간 데이터 생성 : date_range()
dates = pd.date_range(
    start='2025-02-27'
    , periods=7
    , freq='ME'
)
dates
```
![image](https://github.com/user-attachments/assets/677893b9-bf0c-4312-ac7a-247b2662c0fc)

```
import pandas as pd
import numpy as np
print(np.arange(24))
print(np.arange(24).shape)
print(np.arange(24).reshape(6,4))
print(np.arange(24).reshape(6,4).shape)
print(np.random.rand(6,4))
print(np.random.rand(6,4).shape)
```
![image](https://github.com/user-attachments/assets/5ea0fe95-1cfb-4254-adaf-e3a65e5ac49a)

```
import pandas as pd
import numpy as np

dates = pd.date_range(
    start='2025-02-27'
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)
print(df)
```
![image](https://github.com/user-attachments/assets/50ef9471-f95a-4a3d-9bb3-a7965bb8ed2e)

```
import pandas as pd
import numpy as np

dates = pd.date_range(
    start='2025-02-27'
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)
print('='*100)
print('데이터프레임 index :',df.index)
print('='*100)
print('데이터프레임 컬럼 :',df.columns)
print('='*100)
print('데이터프레임 values :', df.values)
print('='*100)
print('데이터프레임 values count :', df.value_counts)
print('='*100)
```
![image](https://github.com/user-attachments/assets/66ca6c3d-cd8c-4690-b26a-00e3387b2ff0)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)


#데이터 구조, 정보 확인
print('='*100)
print('데이터 구조, 정보 확인')
df.info()
```
![image](https://github.com/user-attachments/assets/0e8bf122-f5d2-4db8-8b10-7fec3cb2828e)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)


#데이터 통계 확인
print('='*100)
print('데이터 통계 확인')
df.describe()
```
![image](https://github.com/user-attachments/assets/057af9d2-65f3-45a0-9ebb-42389b6e0149)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)


#데이터 처리
# 1. 정렬 : 오름차순(ascending), 내림차순
print('='*100)
print(df)
print('='*100)
print('B컬럼 값으로 내림차순')
df.sort_values(by='B',ascending=False)
```

![image](https://github.com/user-attachments/assets/44cadf8d-6bc2-4a6c-88e2-9bd102af57a9)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

#시리즈에서 인덱싱, 슬라이싱
#df dataframe에서 시리즈 추출
df['A']
```
![image](https://github.com/user-attachments/assets/fc35340c-9c66-4718-910c-6f4d778e8cc8)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

df[0:3]
```
![image](https://github.com/user-attachments/assets/d1cdbbef-7a53-4f8a-89f2-5219fc997dca)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

df['2025-02-28':'2025-04-30']
```
![image](https://github.com/user-attachments/assets/13b48013-512e-4af6-82f3-ee9dbf667e3a)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

df['2025-02-28':'20250430']
```
![image](https://github.com/user-attachments/assets/2b5331fc-2c7a-43ba-afcb-ded64db8ec4a)

```
# 오류 코드
# named index에서 주의 : 슬라이싱에서 end 값이 -1 이 안된다.
# 슬라이싱을 하면 DataFrame으로 반환한다.
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

df['2025-02-28':-1]
```
![image](https://github.com/user-attachments/assets/ad4697fe-0595-4bb2-808d-03c110ce4f77)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)
# loc : locindexer
df.loc['20250228']
```
![image](https://github.com/user-attachments/assets/6bc5bdb9-52bb-4281-8cf3-a65b93317259)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)
# df.loc['20250228'] named index로 접근
# loc, lic 데이터 추출 : loc[],iloc[]
df.iloc[0] #int index로 접근
```
![image](https://github.com/user-attachments/assets/aaa45c26-60f8-4fa0-83ce-81321e10a098)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

# loc[행,열] : named index로 행과 열 접근 
# df.loc[ start: end, column]
df.loc[:,['A','C']]

```
![image](https://github.com/user-attachments/assets/d066ddac-0c31-4b1a-96f8-a580216554cd)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

# 날짜 인덱스로 접근
df.loc['20250430':'20250630']
```
![image](https://github.com/user-attachments/assets/6f5603fa-8728-4450-92c9-ec79dd5bfcc5)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

# 날짜 인덱스로 접근
df.loc['20250430':'20250630',['B','D']]
```
![image](https://github.com/user-attachments/assets/c9c50560-7258-4b10-9bf5-96cc6f27b8e8)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

# 5하고 15 추출 하는 방법
df.loc[['20250331','2025-05-31'],['B','D']]
```
![image](https://github.com/user-attachments/assets/6a2cd208-84ca-4473-8601-08f4b634e0ea)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

# 4,5값 추출
df.loc['2025-03-31','A':'B']
```
![image](https://github.com/user-attachments/assets/4a934165-c0fd-4390-8a8d-ac222ffde4f2)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

# 값 10만 추출

df.loc['2025-04-30','C']
```
![image](https://github.com/user-attachments/assets/d05e8dde-553a-4ada-9767-d7b00d9cba6d)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

# 값 10만 추출

df.iloc[2,2]
```
![image](https://github.com/user-attachments/assets/035290e1-532c-4697-b603-b53b559c1334)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

# C컬럼 추출
print('='*100)
print(df['C'])
print('='*100)
print(df.loc[:,'C'])
```
![image](https://github.com/user-attachments/assets/11810855-db8f-4efb-bdab-adafad32f6f5)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

# 행 단위 추출
print('='*100)
print(df.loc['2025-04-30']) # 인덱싱
print('='*100)
print(df.loc['2025-04-30',:]) #슬라이싱

```

![image](https://github.com/user-attachments/assets/2e3f7fdc-7899-40b4-bd36-ad8534474e04)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

print('='*100)
print(df.iloc[3:5,0:2]) # 슬라이싱
print('='*100)
print(df.iloc[[1,2,4],0:2]) # integer index를 사용한 팬시 색인 : 비연속적인 데이터를 여러개 추출
print('='*100)
print(df.iloc[1:3,:])
```
![image](https://github.com/user-attachments/assets/359c993e-2ea8-414f-9387-6935641d1f90)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)
#boolenan(조건) 인덱싱 : 조건에 맞는 데이터만 추출

print('A 컬럼')
print(df['A'] )
print('='*50)
print('A 컬럼 중 5보다 작은 값 (df["A"] <5)')
print(df['A'] <5 )
print('='*50)
print('A 컬럼 중 5보다 작은 값 df[df["A"]<5]')
print(df[df['A']<5])
```
![image](https://github.com/user-attachments/assets/92151a99-a67e-4ee9-89eb-3f846b746d42)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

df2 = df # 복사가 아니다
print('df의 주소 :',id(df))
print('df2의 주소 :',id(df2))
print('='*50)
df3 = df.copy()
print('df의 주소 :',id(df))
print('df2의 주소 :',id(df2))
print('df3의 주소 :',id(df3))
print(id(df) is id(df3))
```
![image](https://github.com/user-attachments/assets/74f7e2e6-896b-4d11-b671-34184c994aff)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

df2 = df # 복사가 아니다
df3 = df.copy()

# 데이터프레임에서 컬럼 추가

df3['E']=['one','one','two','three','four','three']

print(df3)
```
![image](https://github.com/user-attachments/assets/b36d91b1-afd7-4d9a-be59-1f6a56d11587)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

df2 = df # 복사가 아니다
df3 = df.copy()
df3['E']=['one','one','two','three','four','three']

df3['E'].isin(['two','four']) # isin([여러개]) method : boolean index 중 한개
```
![image](https://github.com/user-attachments/assets/378de56d-9634-4084-a84f-bae771686e8c)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)

df2 = df # 복사가 아니다
df3 = df.copy()
df3['E']=['one','one','two','three','four','three']
df3[df3['E'].isin(['two','four'])]
```
![image](https://github.com/user-attachments/assets/0c4f43b4-6f3c-438b-b69e-5cf338aaefa5)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=6
    , freq='ME'
)

#데이터프레임(df) 생성
df = pd.DataFrame(
    np.arange(24).reshape(6,4)
    ,index=dates
    ,columns=['A','B','C','D']
)
print(df)
print('='*50)
print(df.apply(np.cumsum))
```
![image](https://github.com/user-attachments/assets/26216342-95f4-42d7-8479-12dd940ee135)

---

## 6. 날짜 다루기

- 용도 : 일정 기간 동안의 날짜 범위를 생성하는데 사용, 주로 시계열 데이터 처리에 유용
- date_range(start,end,periods, freq, tz,,,,,,,,)
  - freq=value (value 값에는 D,B,ME,h 등이 있음)
    - value
      
      D : 일단위
      
      B : 주말을 제외한 평일
      
      h : 시간단위
      
      min : 분단위
      
      s : 초단위
      
      ms : 밀리초
      
      W : 주단위
      
      ME : 월단위
      
      QE : 분기 단위
      
      YE : 연단위
```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=7
)

series = pd.Series(
    data=[1,2,3,4,5,6,7]
    , index = dates
)
print(series)
```
![image](https://github.com/user-attachments/assets/f0aeaf02-3389-462d-839e-3a236d7eff03)

```
import pandas as pd
import numpy as np
from datetime import datetime

dates = pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=7
)

series = pd.Series(
    data=[1,2,3,4,5,6,7]
    , index = dates
)

#슬라이싱

print(series['20250228':'2025-03-04'])
```
![image](https://github.com/user-attachments/assets/c091efef-263b-4eb9-8258-045263c8053b)

```
import pandas as pd
import numpy as np
from datetime import datetime

# 범위의 날짜로 생성 : 일단위 생성(freq='D')
date_range =pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , end = '2025-06-28'
)
print(date_range)
```
![image](https://github.com/user-attachments/assets/c4a9560e-3c94-4253-b6d8-4211b4292f27)

```
import pandas as pd
import numpy as np
from datetime import datetime

# 범위의 날짜로 생성 : 시간 단위 생성(freq='h')
date_range =pd.date_range(
    start=datetime.today().strftime("%Y%m%d") 
    , periods=10
    , freq='h'
)
print(date_range)
```
![image](https://github.com/user-attachments/assets/867710f7-5924-4e56-83b1-482c0c5d9c79)

```
import pandas as pd
import numpy as np
from datetime import datetime


now=datetime.now()
print(now)
```
![image](https://github.com/user-attachments/assets/3b771907-7cab-41eb-9d77-df5e2e0edc7c)


---

## 7.인덱싱, 슬라이싱, 팬시색인, 불린인덱싱 응용
  - (특정) 행이나 (특정) 커럼 추출 목적
  1. 행 기준 추출 : loc[], iloc[]
  2. 컬럼 기준 추출 : ['컬럼명'],[['컬럼명','컬럼명','컬럼명','컬럼명']]
  3. 인덱싱 : 정수 인덱스, 네임드 인덱스

```
import pandas as pd
import numpy as np
from datetime import datetime

data = {
    'Name' : ['홍길동','고길동','마이꼴','둘리','희동']
    , 'Age' : [20,30,20,1000,2]
    , 'Addr' : ['울릉도','서울','서울','별','서울']
}
df = pd.DataFrame(data)
df
```
![image](https://github.com/user-attachments/assets/08eb4ce7-d3bb-4209-bd50-ad92244dd5e9)

```
import pandas as pd
import numpy as np
from datetime import datetime
data = {
    'Name' : ['홍길동','고길동','마이꼴','둘리','희동']
    , 'Age' : [20,30,20,1000,2]
    , 'Addr' : ['울릉도','서울','서울','별','서울']
}
df = pd.DataFrame(data)
print('='*50)
print(df['Name'])
print('='*50)
print(df['Age'])
print('='*50)
print(df['Addr'])
print('='*50)
```
![image](https://github.com/user-attachments/assets/2ecb28d7-cddd-42d7-ba8e-6e6c65801c15)

```
import pandas as pd
import numpy as np
from datetime import datetime
data = {
    'Name' : ['홍길동','고길동','마이꼴','둘리','희동']
    , 'Age' : [20,30,20,1000,2]
    , 'Addr' : ['울릉도','서울','서울','별','서울']
}
df = pd.DataFrame(data)

print(df.loc[0,:])
print('='*50)
print(df.iloc[0,:])
print('='*50)
print(df.index)
#named index에 정수가 들어갈 수 있다.
```
![image](https://github.com/user-attachments/assets/38b61bdc-2eee-404f-8963-b83ec2f30375)

```
import pandas as pd
import numpy as np
from datetime import datetime
data = {
    'Name' : ['홍길동','고길동','마이꼴','둘리','희동']
    , 'Age' : [20,30,20,1000,2]
    , 'Addr' : ['울릉도','서울','서울','별','서울']
}
df = pd.DataFrame(data)
print('='*50)
print(df)

# 특정 컬럼을 인덱스 영역으로 보내는 작업
# set_index(지정한 컬럼)
print('='*50)
df = df.set_index('Name')
print(df)
print('='*50)
# 홍길동의 데이터 추출(행 추출)
df.loc['홍길동']
```
![image](https://github.com/user-attachments/assets/d4070353-4d31-4978-9a43-8c737652a2de)

```
import pandas as pd
import numpy as np
from datetime import datetime
data = {
    'Name' : ['홍길동','고길동','마이꼴','둘리','희동']
    , 'Age' : [20,30,20,1000,2]
    , 'Addr' : ['울릉도','서울','서울','별','서울']
}
df = pd.DataFrame(data)

df = df.set_index('Name')

# 팬시 색인 : 홍길동 마이꼴 추출
df.loc[['홍길동','마이꼴']]
```
![image](https://github.com/user-attachments/assets/2923b2f9-64bd-4da5-9779-655a4fe026a9)

```
import pandas as pd
import numpy as np
from datetime import datetime
data = {
    'Name' : ['홍길동','고길동','마이꼴','둘리','희동']
    , 'Age' : [20,30,20,1000,2]
    , 'Addr' : ['울릉도','서울','서울','별','서울']
}
df = pd.DataFrame(data)

df = df.set_index('Name')

# 불린 인덱싱
# 나이가 20 이상인 데이터 추출
print(df['Age']> 20)
print('='*50)
print(df[df['Age']>20])
```
![image](https://github.com/user-attachments/assets/dd233269-f7e8-40c6-932d-df9474c22164)

```
import pandas as pd
import numpy as np
from datetime import datetime
data = {
    'Name' : ['홍길동','고길동','마이꼴','둘리','희동']
    , 'Age' : [20,30,20,1000,2]
    , 'Addr' : ['울릉도','서울','서울','별','서울']
}
df = pd.DataFrame(data)

df = df.set_index('Name')

# 슬라이싱 : 고길동부터 둘리 행단위 추출
df.loc['고길동':'둘리']
```
![image](https://github.com/user-attachments/assets/208c4078-20d6-46b0-a251-6a837319fcb7)

```
import pandas as pd
import numpy as np
from datetime import datetime
data = {
    'Name' : ['홍길동','고길동','마이꼴','둘리','희동']
    , 'Age' : [20,30,20,1000,2]
    , 'Addr' : ['울릉도','서울','서울','별','서울']
}
df = pd.DataFrame(data)

df = df.set_index('Name')

# 구분 컬럼 추가
df['group']=['가족','친구','회사','기타','친구']

df
```
![image](https://github.com/user-attachments/assets/3b3e9123-65a2-48a5-9fb3-d1df41969698)

```
import pandas as pd
import numpy as np
from datetime import datetime
data = {
    'Name' : ['홍길동','고길동','마이꼴','둘리','희동']
    , 'Age' : [20,30,20,1000,2]
    , 'Addr' : ['울릉도','서울','서울','별','서울']
}
df = pd.DataFrame(data)

df = df.set_index('Name')

# 구분 컬럼 추가
df['group']=['가족','친구','회사','기타','친구']

# 가족,친구 검색 => 불린 인덱싱
print('='*50)
print(df['group'].isin(['가족','친구']))
print('='*50)
print(df[df['group'].isin(['가족','친구'])])
```
![image](https://github.com/user-attachments/assets/7562f085-8c3e-4112-a7ca-e244b4e3f2f1)

---

## 8. cctv 및 인구 현황 데이터 읽기
#### 1. CCTV 데이터 파악하기
```
import numpy as np
import pandas as pd

CCTV_Seoul =pd.read_csv(
    './data/01. CCTV_in_Seoul.csv'
    , encoding='utf-8'
)

# 데이터 탐색
# describe, info, head, 정렬
print('='*50)
print(CCTV_Seoul.head())
print('='*50)
print(CCTV_Seoul.describe())
print('='*50)
print(CCTV_Seoul.info())
```
![image](https://github.com/user-attachments/assets/63d335cf-970a-42fc-b887-d87c22647006)
![image](https://github.com/user-attachments/assets/cb485967-c962-4d8e-81a6-a85318f16a86)

```
import numpy as np
import pandas as pd

CCTV_Seoul =pd.read_csv(
    './data/01. CCTV_in_Seoul.csv'
    , encoding='utf-8'
)

# 데이터 탐색
# 정렬
CCTV_Seoul.sort_values(
    by='소계' #컬럼명
    , ascending=True #default
)

```
![image](https://github.com/user-attachments/assets/f930342c-bc05-49d3-9a0e-9bb05016490d)

```
import numpy as np
import pandas as pd

CCTV_Seoul =pd.read_csv(
    './data/01. CCTV_in_Seoul.csv'
    , encoding='utf-8'
)

# 데이터 탐색
# 정렬
CCTV_Seoul.sort_values(
    by='소계' #컬럼명
    , ascending=False
).head()
```
![image](https://github.com/user-attachments/assets/5b2c4e61-1957-435e-803d-deec6f5ce1fc)

```
import numpy as np
import pandas as pd

CCTV_Seoul =pd.read_csv(
    './data/01. CCTV_in_Seoul.csv'
    , encoding='utf-8'
)

# 최근 증가율 구하고 컬럼 추가 => 2014년,2015년,2016년 데이터를 더하고 2013년 이전을 나눌예정
# CCTV_Seoul['최근 증가율']=(14년도+15년도+16년도)/CCTV_Seoul['2013년도 이전']*100
CCTV_Seoul['최근 증가율']=\
    (
        CCTV_Seoul['2014년'] \
        +CCTV_Seoul['2015년'] \
        +CCTV_Seoul['2016년'] \
    ) /CCTV_Seoul['2013년도 이전']\
    *100
    
CCTV_Seoul
```
![image](https://github.com/user-attachments/assets/33a024d7-eba9-4249-a2f3-f299db51888f)

```
import numpy as np
import pandas as pd

CCTV_Seoul =pd.read_csv(
    './data/01. CCTV_in_Seoul.csv'
    , encoding='utf-8'
)


CCTV_Seoul['최근 증가율']=\
    (
        CCTV_Seoul['2014년'] \
        +CCTV_Seoul['2015년'] \
        +CCTV_Seoul['2016년'] \
    ) /CCTV_Seoul['2013년도 이전']\
    *100
    
# 최근 3년간 많이 증가한 구를 확인 : 정렬
CCTV_Seoul.sort_values(
    by='최근 증가율',
    ascending=False
)
```
![image](https://github.com/user-attachments/assets/1410ee65-68bd-4d11-988b-8dd30979aabb)

```
import numpy as np
import pandas as pd

CCTV_Seoul =pd.read_csv(
    './data/01. CCTV_in_Seoul.csv'
    , encoding='utf-8'
)


CCTV_Seoul['최근 증가율']=\
    (
        CCTV_Seoul['2014년'] \
        +CCTV_Seoul['2015년'] \
        +CCTV_Seoul['2016년'] \
    ) /CCTV_Seoul['2013년도 이전']\
    *100
    


# 컬럼명 변경 : 기관명 => 구별 변경
CCTV_Seoul.rename(
    columns={
        CCTV_Seoul.columns[0] : '구별'        
    },
    inplace=True
)

CCTV_Seoul
```
![image](https://github.com/user-attachments/assets/d1b3abdc-9d8e-4b0e-862c-4b28e1e525d4)

#### 2. 서울시 인구 데이터 파악하기
```
# 인구 현황
import numpy as np
import pandas as pd

POP_Seoul =pd.read_excel(
    './data/01. population_in_Seoul.xls'
    , header=2
    , usecols='B,D,G,J,N'
)

POP_Seoul
```
![image](https://github.com/user-attachments/assets/c5b60864-1f1c-49f0-a1c4-c903eaf9b419)

```
import numpy as np
import pandas as pd

POP_Seoul =pd.read_excel(
    './data/01. population_in_Seoul.xls'
    , header=2
    , usecols='B,D,G,J,N'
)
#컬럼명 변경
POP_Seoul.rename(
    columns={
        POP_Seoul.columns[0] : '구별'
        ,POP_Seoul.columns[1] : '인구수'
        ,POP_Seoul.columns[2] : '한국인 수'
        ,POP_Seoul.columns[3] : '외국인 수'
        ,POP_Seoul.columns[4] : '고령자 수'
    },
    inplace=True
)
POP_Seoul
```
![image](https://github.com/user-attachments/assets/e2cae690-3e4a-413d-85fb-c4a7e4bcea97)

```
# 행,컬럼 삭제 : drop([정수 인덱스],axis=0|1,inplace)
# axis 는 축이다
# axis=0 : 행방향
# axis=1 : 열방향

import numpy as np
import pandas as pd

POP_Seoul =pd.read_excel(
    './data/01. population_in_Seoul.xls'
    , header=2
    , usecols='B,D,G,J,N'
)

POP_Seoul.rename(
    columns={
        POP_Seoul.columns[0] : '구별'
        ,POP_Seoul.columns[1] : '인구수'
        ,POP_Seoul.columns[2] : '한국인 수'
        ,POP_Seoul.columns[3] : '외국인 수'
        ,POP_Seoul.columns[4] : '고령자 수'
    },
    inplace=True
)
POP_Seoul.drop(
    [0] #[0] : 0번행 삭제, 리스트 : 여러개 삭제 가능
    ,axis=1
    ,inplace=True
)
POP_Seoul
```

0이라는 key가 없어서 에러가 발생한다.

![image](https://github.com/user-attachments/assets/6f79727b-6b8e-4bd0-89cb-901a86200f5d)

```
# 행,컬럼 삭제 : drop([정수 인덱스],axis=0|1,inplace)
# axis 는 축이다
# axis=0 : 행방향
# axis=1 : 열방향

import numpy as np
import pandas as pd

POP_Seoul =pd.read_excel(
    './data/01. population_in_Seoul.xls'
    , header=2
    , usecols='B,D,G,J,N'
)

POP_Seoul.rename(
    columns={
        POP_Seoul.columns[0] : '구별'
        ,POP_Seoul.columns[1] : '인구수'
        ,POP_Seoul.columns[2] : '한국인 수'
        ,POP_Seoul.columns[3] : '외국인 수'
        ,POP_Seoul.columns[4] : '고령자 수'
    },
    inplace=True
)
POP_Seoul.drop(
    [0] #[0] : 0번행 삭제, 리스트 : 여러개 삭제 가능
    ,axis=0
    ,inplace=True
)
POP_Seoul
```
![image](https://github.com/user-attachments/assets/13732e7f-164e-4065-bce8-3c7dd85bf241)

```
# 행,컬럼 삭제 : drop([정수 인덱스],axis=0|1,inplace)
# axis 는 축이다
# axis=0 : 행방향
# axis=1 : 열방향

import numpy as np
import pandas as pd

POP_Seoul =pd.read_excel(
    './data/01. population_in_Seoul.xls'
    , header=2
    , usecols='B,D,G,J,N'
)

POP_Seoul.rename(
    columns={
        POP_Seoul.columns[0] : '구별'
        ,POP_Seoul.columns[1] : '인구수'
        ,POP_Seoul.columns[2] : '한국인 수'
        ,POP_Seoul.columns[3] : '외국인 수'
        ,POP_Seoul.columns[4] : '고령자 수'
    },
    inplace=True
)
POP_Seoul.drop(
    [0] #[0] : 0번행 삭제, 리스트 : 여러개 삭제 가능
    ,axis=0
    ,inplace=True
).head()
```
> inplace 사용시 주의
> 
> drop(inplace = True) => 원본에 변영이되어 복사본이 없어 DataFrame을 반환을 안하고 None을 반환하기 때문에 head 메소드 사용 불가능
> 
> drop(inplace = False) => 복사된 Object에서 삭제된 DataFrame 반환 하기 때문에 head 메소드 사용 가능

![image](https://github.com/user-attachments/assets/643ac498-bd32-4f7f-9fa1-72fb63b39251)

```
# 행,컬럼 삭제 : drop([정수 인덱스],axis=0|1,inplace)
# axis 는 축이다
# axis=0 : 행방향
# axis=1 : 열방향

import numpy as np
import pandas as pd

POP_Seoul =pd.read_excel(
    './data/01. population_in_Seoul.xls'
    , header=2
    , usecols='B,D,G,J,N'
)

POP_Seoul.rename(
    columns={
        POP_Seoul.columns[0] : '구별'
        ,POP_Seoul.columns[1] : '인구수'
        ,POP_Seoul.columns[2] : '한국인 수'
        ,POP_Seoul.columns[3] : '외국인 수'
        ,POP_Seoul.columns[4] : '고령자 수'
    },
    inplace=True
)
POP_Seoul.drop(
    [0] #[0] : 0번행 삭제, 리스트 : 여러개 삭제 가능
    ,axis=0
    ,inplace=True
)
POP_Seoul.head()
```
![image](https://github.com/user-attachments/assets/2fc49b22-fd6d-4cfa-ae2e-4adf0e77ed74)

```
# 구별 컬럼의 중복값 확인 : 중복값 제거 => unique()
import numpy as np
import pandas as pd

CCTV_Seoul =pd.read_csv(
    './data/01. CCTV_in_Seoul.csv'
    , encoding='utf-8'
)

# 인구 현황
import numpy as np
import pandas as pd

POP_Seoul =pd.read_excel(
    './data/01. population_in_Seoul.xls'
    , header=2
    , usecols='B,D,G,J,N'
)

POP_Seoul.rename(
    columns={
        POP_Seoul.columns[0] : '구별'
        ,POP_Seoul.columns[1] : '인구수'
        ,POP_Seoul.columns[2] : '한국인 수'
        ,POP_Seoul.columns[3] : '외국인 수'
        ,POP_Seoul.columns[4] : '고령자 수'
    },
    inplace=True
)

POP_Seoul.drop(
    [0] #[0] : 0번행 삭제, 리스트 : 여러개 삭제 가능
    ,axis=0
    ,inplace=True
)

POP_Seoul['구별'].unique()
```
![image](https://github.com/user-attachments/assets/1d5fca61-b449-4f67-ba45-678bc2b19eaa)

```
# 구별 컬럼의 중복값 확인 : 중복값 제거 => unique()
import numpy as np
import pandas as pd

CCTV_Seoul =pd.read_csv(
    './data/01. CCTV_in_Seoul.csv'
    , encoding='utf-8'
)

# 인구 현황
import numpy as np
import pandas as pd

POP_Seoul =pd.read_excel(
    './data/01. population_in_Seoul.xls'
    , header=2
    , usecols='B,D,G,J,N'
)

POP_Seoul.rename(
    columns={
        POP_Seoul.columns[0] : '구별'
        ,POP_Seoul.columns[1] : '인구수'
        ,POP_Seoul.columns[2] : '한국인 수'
        ,POP_Seoul.columns[3] : '외국인 수'
        ,POP_Seoul.columns[4] : '고령자 수'
    },
    inplace=True
)

POP_Seoul.drop(
    [0] #[0] : 0번행 삭제, 리스트 : 여러개 삭제 가능
    ,axis=0
    ,inplace=True
)

# nan 값이 있는 행 확인 (불린 인덱싱 사용)
# => isnull() : nan 값을 찾아서 boolean 값으로 반환한다 nan 값이 True다
POP_Seoul['구별'].isnull()
```
![image](https://github.com/user-attachments/assets/33963d4e-f614-4209-811f-3dc2b0e8f7cd)

```
# 구별 컬럼의 중복값 확인 : 중복값 제거 => unique()
import numpy as np
import pandas as pd

CCTV_Seoul =pd.read_csv(
    './data/01. CCTV_in_Seoul.csv'
    , encoding='utf-8'
)

# 인구 현황
import numpy as np
import pandas as pd

POP_Seoul =pd.read_excel(
    './data/01. population_in_Seoul.xls'
    , header=2
    , usecols='B,D,G,J,N'
)

POP_Seoul.rename(
    columns={
        POP_Seoul.columns[0] : '구별'
        ,POP_Seoul.columns[1] : '인구수'
        ,POP_Seoul.columns[2] : '한국인 수'
        ,POP_Seoul.columns[3] : '외국인 수'
        ,POP_Seoul.columns[4] : '고령자 수'
    },
    inplace=True
)

POP_Seoul.drop(
    [0] #[0] : 0번행 삭제, 리스트 : 여러개 삭제 가능
    ,axis=0
    ,inplace=True
)

POP_Seoul[POP_Seoul['구별'].isnull()]
```
![image](https://github.com/user-attachments/assets/c4b99dc4-2f17-4fc2-b0d7-ee8a389f71cf)

```
# 구별 컬럼의 중복값 확인 : 중복값 제거 => unique()
import numpy as np
import pandas as pd

CCTV_Seoul =pd.read_csv(
    './data/01. CCTV_in_Seoul.csv'
    , encoding='utf-8'
)

# 인구 현황
import numpy as np
import pandas as pd

POP_Seoul =pd.read_excel(
    './data/01. population_in_Seoul.xls'
    , header=2
    , usecols='B,D,G,J,N'
)

POP_Seoul.rename(
    columns={
        POP_Seoul.columns[0] : '구별'
        ,POP_Seoul.columns[1] : '인구수'
        ,POP_Seoul.columns[2] : '한국인 수'
        ,POP_Seoul.columns[3] : '외국인 수'
        ,POP_Seoul.columns[4] : '고령자 수'
    },
    inplace=True
)

POP_Seoul.drop(
    [0] #[0] : 0번행 삭제, 리스트 : 여러개 삭제 가능
    ,axis=0
    ,inplace=True
)

POP_Seoul.drop(
    [26]
    ,axis=0
    ,inplace=True
)

POP_Seoul[POP_Seoul['구별'].isnull()]
```
![image](https://github.com/user-attachments/assets/1d70d50f-a05f-482f-83c9-7ce94d8f92ce)

```
# 구별 컬럼의 중복값 확인 : 중복값 제거 => unique()
import numpy as np
import pandas as pd

CCTV_Seoul =pd.read_csv(
    './data/01. CCTV_in_Seoul.csv'
    , encoding='utf-8'
)

# 인구 현황
import numpy as np
import pandas as pd

POP_Seoul =pd.read_excel(
    './data/01. population_in_Seoul.xls'
    , header=2
    , usecols='B,D,G,J,N'
)

POP_Seoul.rename(
    columns={
        POP_Seoul.columns[0] : '구별'
        ,POP_Seoul.columns[1] : '인구수'
        ,POP_Seoul.columns[2] : '한국인 수'
        ,POP_Seoul.columns[3] : '외국인 수'
        ,POP_Seoul.columns[4] : '고령자 수'
    },
    inplace=True
)

POP_Seoul.drop(
    [0] #[0] : 0번행 삭제, 리스트 : 여러개 삭제 가능
    ,axis=0
    ,inplace=True
)

POP_Seoul.drop(
    [26]
    ,axis=0
    ,inplace=True
)

# 인구현황 파일 저장
POP_Seoul.to_csv('./data/01. 인구현황 nan 삭제까지.csv')
```
![image](https://github.com/user-attachments/assets/59502763-abcf-4ede-b026-cb6063c7293c)

```
import numpy as np
import pandas as pd

CCTV_Seoul =pd.read_csv(
    './data/01. CCTV_in_Seoul.csv'
    , encoding='utf-8'
)


CCTV_Seoul['최근 증가율']=\
    (
        CCTV_Seoul['2014년'] \
        +CCTV_Seoul['2015년'] \
        +CCTV_Seoul['2016년'] \
    ) /CCTV_Seoul['2013년도 이전']\
    *100
    


# 컬럼명 변경 : 기관명 => 구별 변경
CCTV_Seoul.rename(
    columns={
        CCTV_Seoul.columns[0] : '구별'        
    },
    inplace=True
)

CCTV_Seoul.to_csv('./data/01. CCTV 현황 중간 데이터.csv')
```
![image](https://github.com/user-attachments/assets/98251f29-da84-4bdf-bdb5-991e9aa7cff1)

※ index는 컬럼명이 없어 추후에 read_csv를 사용시 문제가 발생 할 가능성도 존재
![image](https://github.com/user-attachments/assets/99da3fa4-1d2a-448a-843b-21444635d519)

---

## 9.csv 파일 읽기

to_csv는 index 또한 저장이 되어있다.

```
import numpy as np
import pandas as pd

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
)

CCTV_Seoul
```
![image](https://github.com/user-attachments/assets/d64a8c22-0556-4687-a126-3500c29c2a61)

![image](https://github.com/user-attachments/assets/5b6bd0cf-95e8-4b65-974d-946d582d31d4)

위의 사진 처럼 Unnamed:0으로 이건 index이다 그러므로 따로 index값을 주어야한다.

```
import numpy as np
import pandas as pd

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 #0번 컬럼을 인덱스로 보내는 의미
)

CCTV_Seoul
```
![image](https://github.com/user-attachments/assets/6eeb0456-51cf-45a6-b7ea-8aff9759d673)

인구현황도 똑같이 하면 된다.

```
import numpy as np
import pandas as pd

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0
    
)
POP_Seoul
```
![image](https://github.com/user-attachments/assets/d936e509-6263-4937-b595-43561320d764)

```
# 인구숙 정렬
# POP_Seoul : dataframe object

import numpy as np
import pandas as pd

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0
    
)
POP_Seoul.sort_values(
    by='인구수'
    ,ascending=False
)
```
![image](https://github.com/user-attachments/assets/eb6df2d9-a493-4542-b9ef-398a251f4625)

```
# 외국인 데이터 정렬
# POP_Seoul : dataframe object

import numpy as np
import pandas as pd

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0
    
)
POP_Seoul.sort_values(
    by='외국인 수'
    ,ascending=False
)
```
![image](https://github.com/user-attachments/assets/4ce0b4ff-dec3-4cc4-a6ef-dec80527e495)

```
# 고령자 데이터 정렬
# POP_Seoul : dataframe object

import numpy as np
import pandas as pd

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0
    
)
POP_Seoul.sort_values(
    by='고령자 수'
    ,ascending=False
)
```
![image](https://github.com/user-attachments/assets/65c9df1b-e0fd-4dca-aae0-65fd64099c2b)

```

import numpy as np
import pandas as pd

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

POP_Seoul
```
![image](https://github.com/user-attachments/assets/11a73926-c1e4-49e7-9828-f2afbd4f4860)

---

## 10. Dataframe 병합 연습 (concat)

```
import numpy as np
import pandas as pd



df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

# 3개 데이터프레입 병합 : concat([데이터프레임들],axis = 0 or 1)

result = pd.concat(
    [df1,df2,df3]
    # 컬럼명 기준으로 병합
    , axis=0 # default = 0 (0은 아래로 병합, 1은 옆으로 병합)
)

result
```
![image](https://github.com/user-attachments/assets/bae83876-e750-4358-9551-f220e0324874)

```
import numpy as np
import pandas as pd



df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

# 3개 데이터프레입 병합 : concat([데이터프레임들],axis = 0 or 1)

result = pd.concat(
    [df1,df2,df3]
    # 컬럼명 기준으로 병합
    , axis=0 # default = 0 (0은 아래로 병합, 1은 옆으로 병합)
    , keys=['df1','df2','df3']
)

result
```
![image](https://github.com/user-attachments/assets/03c7fdf8-5461-4278-a190-62bfee72d5e8)

```
import numpy as np
import pandas as pd



df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

# 3개 데이터프레입 병합 : concat([데이터프레임들],axis = 0 or 1)

result = pd.concat(
    [df1,df2,df3]
    # 컬럼명 기준으로 병합
    , axis=0 # default = 0 (0은 아래로 병합, 1은 옆으로 병합)
    , keys=['1번','2번','3번']
)

result
```
![image](https://github.com/user-attachments/assets/785f3ed2-3f76-48a6-801b-ef895a8795d8)

```
import numpy as np
import pandas as pd



df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

# 3개 데이터프레입 병합 : concat([데이터프레임들],axis = 0 or 1)

result = pd.concat(
    [df1,df2,df3]
    # 컬럼명 기준으로 병합
    , axis=0 # default = 0 (0은 아래로 병합, 1은 옆으로 병합)
    , keys=['x','y','z']
)

# index 다루기
result.index
```
![image](https://github.com/user-attachments/assets/f4377e48-7c6c-4829-a260-4be3624e10ec)

```
import numpy as np
import pandas as pd



df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

# 3개 데이터프레입 병합 : concat([데이터프레임들],axis = 0 or 1)

result = pd.concat(
    [df1,df2,df3]
    # 컬럼명 기준으로 병합
    , axis=0 # default = 0 (0은 아래로 병합, 1은 옆으로 병합)
    , keys=['x','y','z']
)

# index 다루기
result.index.get_level_values(0)
```

![image](https://github.com/user-attachments/assets/a4068621-6a54-4677-aeb3-ad50c19d9066)

```
import numpy as np
import pandas as pd



df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

# 3개 데이터프레입 병합 : concat([데이터프레임들],axis = 0 or 1)

result = pd.concat(
    [df1,df2,df3]
    # 컬럼명 기준으로 병합
    , axis=0 # default = 0 (0은 아래로 병합, 1은 옆으로 병합)
    , keys=['x','y','z']
)

# index 다루기
result.index.get_level_values(1)
```

![image](https://github.com/user-attachments/assets/ed6e6056-d292-4c58-bf44-69feb4147bb1)

```
import numpy as np
import pandas as pd

df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

df4 = pd.DataFrame({
      'B' : ['B2','B3','B6','B7']
    , 'D' : ['D2','D3','D6','D7']
    , 'F' : ['F2','F3','F6','F7']
}
, index=[2,3,6,7])

# 새로운 데잌터 프레임 생성 : df4
# df1, df4 병합
# df4에는 'B','D','F'와 index 2,3,6,7 만 있다
# 옆으로 병합

result =pd.concat(
    [df1,df4]
    ,axis=1
) # full outer join이 된 상태

result
```

![image](https://github.com/user-attachments/assets/8c5ad2a0-1010-4ec3-89d6-89356dc9667a)


```
import numpy as np
import pandas as pd

df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

df4 = pd.DataFrame({
      'B' : ['B2','B3','B6','B7']
    , 'D' : ['D2','D3','D6','D7']
    , 'F' : ['F2','F3','F6','F7']
}
, index=[2,3,6,7])

# 새로운 데잌터 프레임 생성 : df4
# df1, df4 병합
# df4에는 'B','D','F'와 index 2,3,6,7 만 있다
# 옆으로 병합

result =pd.concat(
    [df1,df4]
    ,axis=1
    , join='outer' # default가 outer 조인
)
result
```

![image](https://github.com/user-attachments/assets/9942d0b6-4cd2-4e2d-aef5-3ea264641013)

```
import numpy as np
import pandas as pd

df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

df4 = pd.DataFrame({
      'B' : ['B2','B3','B6','B7']
    , 'D' : ['D2','D3','D6','D7']
    , 'F' : ['F2','F3','F6','F7']
}
, index=[2,3,6,7])

# 새로운 데잌터 프레임 생성 : df4
# df1, df4 병합
# df4에는 'B','D','F'와 index 2,3,6,7 만 있다
# 옆으로 병합
# inner join : 키가 동일것만 조인

result =pd.concat(
    [df1,df4]
    ,axis=1
    , join='inner'
)
result
```

![image](https://github.com/user-attachments/assets/6a4068f9-ef09-40ea-b052-5a97d7252b41)

```
import numpy as np
import pandas as pd

df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

df4 = pd.DataFrame({
      'B' : ['B2','B3','B6','B7']
    , 'D' : ['D2','D3','D6','D7']
    , 'F' : ['F2','F3','F6','F7']
}
, index=[2,3,6,7])

# 새로운 데잌터 프레임 생성 : df4
# df1, df4 병합
# df4에는 'B','D','F'와 index 2,3,6,7 만 있다
# 아래로 병합

result = pd.concat(
    [df1, df4]
    , axis=0
)
result
```

![image](https://github.com/user-attachments/assets/de971807-ed5a-4741-8376-8e508dc2ab1d)

```
import numpy as np
import pandas as pd

df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

df4 = pd.DataFrame({
      'B' : ['B2','B3','B6','B7']
    , 'D' : ['D2','D3','D6','D7']
    , 'F' : ['F2','F3','F6','F7']
}
, index=[2,3,6,7])

# 새로운 데잌터 프레임 생성 : df4
# df1, df4 병합
# df4에는 'B','D','F'와 index 2,3,6,7 만 있다
# 아래로 병합
# inner join

result = pd.concat(
    [df1, df4]
    , axis=0
    , join='inner'
)
result
```

![image](https://github.com/user-attachments/assets/a0b98221-4b51-4f30-9306-75d88d76009e)

```
import numpy as np
import pandas as pd

df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

df4 = pd.DataFrame({
      'B' : ['B2','B3','B6','B7']
    , 'D' : ['D2','D3','D6','D7']
    , 'F' : ['F2','F3','F6','F7']
}
, index=[2,3,6,7])

# 새로운 데잌터 프레임 생성 : df4
# df1, df4 병합
# df4에는 'B','D','F'와 index 2,3,6,7 만 있다
# 옆으로 병합
result = pd.concat(
    [df1, df4]
    , axis=1
    , join='outer'
)
result
```

![image](https://github.com/user-attachments/assets/20362c17-6802-45e3-ad11-754cb198cb0c)

```
import numpy as np
import pandas as pd

df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

df4 = pd.DataFrame({
      'B' : ['B2','B3','B6','B7']
    , 'D' : ['D2','D3','D6','D7']
    , 'F' : ['F2','F3','F6','F7']
}
, index=[2,3,6,7])

# 새로운 데잌터 프레임 생성 : df4
# df1, df4 병합
# df4에는 'B','D','F'와 index 2,3,6,7 만 있다
# 옆으로 병합
# outer join 결과로 df1 기준으로 데이터를 갖고 오고 싶은 경우
# join_axes=[df1.index] 식으로 쓸 수는 있지만 pandas 버전이 높아지면서 'join_axes'가 사라짐
result = pd.concat(
    [df1, df4]
    , axis=1
    , join='outer'
).reindex(df1.index)

result
```
![image](https://github.com/user-attachments/assets/9e85ab22-d728-4576-a33b-2bb78345bda3)

```
import numpy as np
import pandas as pd

df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

df4 = pd.DataFrame({
      'B' : ['B2','B3','B6','B7']
    , 'D' : ['D2','D3','D6','D7']
    , 'F' : ['F2','F3','F6','F7']
}
, index=[2,3,6,7])

# 새로운 데잌터 프레임 생성 : df4
# df1, df4 병합
# df4에는 'B','D','F'와 index 2,3,6,7 만 있다


result = pd.concat(
    [df1, df4]
)

result
```

아래의 사진과 같이 index 값들이 중복 될수도 있다.

![image](https://github.com/user-attachments/assets/b75bc7a6-9509-4227-ae6e-71b817f5dc12)

```
import numpy as np
import pandas as pd

df1 = pd.DataFrame({
      'A' : ['A0','A1','A2','A3']
    , 'B' : ['B0','B1','B2','B3']
    , 'C' : ['C0','C1','C2','C3']
    , 'D' : ['D0','D1','D2','D3']
}
, index=[0,1,2,3]
)


df2 = pd.DataFrame({
      'A' : ['A4','A5','A6','A7']
    , 'B' : ['B4','B5','B6','B7']
    , 'C' : ['C4','C5','C6','C7']
    , 'D' : ['D4','D5','D6','D7']
}
, index=[4,5,6,7]
)


df3 = pd.DataFrame({
      'A' : ['A8','A9','A10','A11']
      , 'B' : ['B8','B9','B10','B11']
      , 'C' : ['C8','C9','C10','C11']
      , 'D' : ['D8','D9','D10','D11']
}
, index=[8,9,10,11]
)

df4 = pd.DataFrame({
      'B' : ['B2','B3','B6','B7']
    , 'D' : ['D2','D3','D6','D7']
    , 'F' : ['F2','F3','F6','F7']
}
, index=[2,3,6,7])

# 새로운 데잌터 프레임 생성 : df4
# df1, df4 병합
# df4에는 'B','D','F'와 index 2,3,6,7 만 있다


result = pd.concat(
    [df1, df4]
    , ignore_index=True # 기존 인덱스를 무시하고 새로 처리
)

result
```

![image](https://github.com/user-attachments/assets/01a6675f-d2da-4e45-982e-9860dc362ebb)

---

## 11. Dataframe 병합 연습 (merge)

```
import numpy as np
import pandas as pd

# merge()
left1 = pd.DataFrame({
    'key' : ['k0','k4','k2','k3']
    , 'A' : ['a0','a1','a2','a3']
    , 'B' : ['b0','b1','b2','b3']
})
right1 = pd.DataFrame({
    'key' : ['k0','k1','k2','k3']
    , 'C' : ['c0','c1','c2','c3']
    , 'D' : ['d0','d1','d2','d3']
})

pd.merge(
    left=left1
    , right=right1
    , on='key' # 조인할 컬럼명 지정
    , how='inner' # inner join이 default
)
```

![image](https://github.com/user-attachments/assets/ba19632c-5787-4137-b133-c37cee788ae3)

```
import numpy as np
import pandas as pd

# merge()
left1 = pd.DataFrame({
    'key' : ['k0','k4','k2','k3']
    , 'A' : ['a0','a1','a2','a3']
    , 'B' : ['b0','b1','b2','b3']
})
right1 = pd.DataFrame({
    'key' : ['k0','k1','k2','k3']
    , 'C' : ['c0','c1','c2','c3']
    , 'D' : ['d0','d1','d2','d3']
})

pd.merge(
    left=left1
    , right=right1
    , on='key' # 조인할 컬럼명 지정
    , how='outer' 
)
```

![image](https://github.com/user-attachments/assets/03b7adb7-20e3-45e1-aa93-05e7730f8c5f)

```
import numpy as np
import pandas as pd

# merge()
left1 = pd.DataFrame({
    'key' : ['k0','k4','k2','k3']
    , 'A' : ['a0','a1','a2','a3']
    , 'B' : ['b0','b1','b2','b3']
})
right1 = pd.DataFrame({
    'key' : ['k0','k1','k2','k3']
    , 'C' : ['c0','c1','c2','c3']
    , 'D' : ['d0','d1','d2','d3']
})

pd.merge(
    left=left1
    , right=right1
    , on='key' # 조인할 컬럼명 지정
    , how='left' 
)
```
![image](https://github.com/user-attachments/assets/83a19ea7-da49-4087-b937-1a58358ac684)

```
import numpy as np
import pandas as pd

# merge()
left1 = pd.DataFrame({
    'key' : ['k0','k4','k2','k3']
    , 'A' : ['a0','a1','a2','a3']
    , 'B' : ['b0','b1','b2','b3']
})
right1 = pd.DataFrame({
    'key' : ['k0','k1','k2','k3']
    , 'C' : ['c0','c1','c2','c3']
    , 'D' : ['d0','d1','d2','d3']
})

pd.merge(
    left=left1
    , right=right1
    , on='key' # 조인할 컬럼명 지정
    , how='right' 
)
```

![image](https://github.com/user-attachments/assets/4d4d734c-5b3c-4228-b95a-2c94ac969130)

> merge는 특정 컬럼의 값으로 조인할 때 사용

---

## 12. CCTV와 인구현황 병합하여 분석

```
import numpy as np
import pandas as pd

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

data_result
```

![image](https://github.com/user-attachments/assets/6982e11e-9971-4ba8-8923-d92a518c0b1c)

```
import numpy as np
import pandas as pd

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result
```

![image](https://github.com/user-attachments/assets/7906ce8a-52d7-4394-a731-df028020b21d)

```
import numpy as np
import pandas as pd

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(dataframe의 drop 메소드 사용)

data_result.drop(labels='2013년도 이전',axis=1,inplace=True)
data_result.drop(labels='2014년',axis=1,inplace=True)
data_result.drop(labels='2015년',axis=1,inplace=True)
data_result.drop(labels='2016년',axis=1,inplace=True)

data_result

```

![image](https://github.com/user-attachments/assets/02f4d00f-3fae-4dc3-834d-b119f5cdba14)

```
import numpy as np
import pandas as pd

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

# 구별이라는 컬럼을 키로 사용
# 인덱스 보내는게  상당히 데이터 처리 및 차트 처리 시 편리하다
data_result.set_index(
    '구별'
    ,inplace=True
)

data_result
```

![image](https://github.com/user-attachments/assets/3c452651-a5bc-4959-a821-0e9c17c8eb1f)

```
import numpy as np
import pandas as pd

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

# 구별이라는 컬럼을 키로 사용
# 인덱스 보내는게  상당히 데이터 처리 및 차트 처리 시 편리하다
data_result.set_index(
    '구별'
    ,inplace=True
)

# 소계와 인구현황 컬럼들과 상관계수 출력
# 상관계수 : -1 ~ 1, 0에 가까우면 관계없다.
# numpy에서 상관계수를 구하는 메소드 : corrcoef(컬름들)

# 구별 인구수와 소계(CCTV 개수)의 상관계수

np.corrcoef(data_result['인구수'],data_result['소계'])
```

![image](https://github.com/user-attachments/assets/6d259ecb-62de-4445-91f5-e33d136c6f5a)  

위의 데이터를  설명하면 아래와 같다

![image](https://github.com/user-attachments/assets/c0c58b1d-f91d-4389-958f-12aad64401af)

---

## 13. 데이터 시각화
plot 종류
1. 라인 플롯
2. 스캐터 플롯
3. 바 차트
4. 히스토그램
4. 박스 플롯
5. 컨투어 플롯
6. 서피스 플롯
7. 서피스 플롯
....등

라이브러리 : matplotlib를 이용 시각화

### line plot : 선그래프
```
# line plot : 선그래프
# pyplot : matplotlib의 서브 패키지
import matplotlib as mpl
import matplotlib.pyplot as plt

# 시각화 단계
# 1. 도화지 준비(그릴 준비하는 것) : figure()
plt.figure(
    figsize=(4,4) # 크기 지정 : 4x4 정사각형 크기 
)
# 2. 도화지에 그린다 : plot
plt.plot([1,2,3,4,5,6])
# 3. 화면에 출력
plt.show()
```

![image](https://github.com/user-attachments/assets/d654068d-3211-4dc5-b022-0c9b8ca35e26)

```
import matplotlib as mpl
import matplotlib.pyplot as plt

plt.figure(
    figsize=(3,3) 
)
plt.title('시각화 연습')
plt.plot([10,20,30,40],[1,4,9,16])
plt.show()

```
한글 폰트가 깨지고 경고가 있는 것을 알수있다.
![image](https://github.com/user-attachments/assets/b6e3f34c-d1fa-45e6-89cc-ee2aacd7a318)

```
import matplotlib as mpl
import matplotlib.pyplot as plt
import warnings
# 경고 무시하기
warnings.filterwarnings('ignore')

plt.figure(
    figsize=(3,3) 
)
plt.title('시각화 연습')
plt.plot([10,20,30,40],[1,4,9,16])
plt.show()
```

![image](https://github.com/user-attachments/assets/c2cea298-ee93-42c7-8571-8dbe3702ab94)

```
# 한글 깨짐 형상 해결

import matplotlib as mpl
import matplotlib.pyplot as plt

from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False


plt.figure(
    figsize=(3,3) 
)
plt.title('시각화 연습')
plt.plot(
    [10,20,30,40] # x축
    ,[1,4,9,16]) # y축
plt.show()

```

![image](https://github.com/user-attachments/assets/132b4fef-7bf5-47a5-bf9a-f9043018382e)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False
# line plot
# range() => return list
# arrange() => return ndarry(numpy)

x = np.arange(0,12,0.01) # (시작값,종료값,스텝)
y = np.sin(x)

print('x 의 값은 : ', x)
print('x의 값의 갯수는 ',len(x))
print('y 의 값은 : ', y)
print('y의 값의 갯수는 ',len(y))
```

![image](https://github.com/user-attachments/assets/9048893c-c235-4813-bb0a-067dcd567aa0)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False
# line plot
# range() => return list
# arrange() => return ndarry(numpy)

x = np.arange(0,12,0.01) # (시작값,종료값,스텝)
y = np.sin(x)

# 선 그래프
plt.figure(figsize=(12,8))
plt.plot(x,y)
plt.show()
```
![image](https://github.com/user-attachments/assets/013305ef-5837-484d-9659-035caa30a880)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False
# line plot
# range() => return list
# arrange() => return ndarry(numpy)

x = np.arange(0,12,1) # (시작값,종료값,스텝)
y = np.sin(x)

# 선 그래프
plt.figure(figsize=(12,8))
plt.plot(x,y)
plt.show()
```
![image](https://github.com/user-attachments/assets/6491a432-c178-472a-9d97-5bbdd9266662)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False
# line plot
# range() => return list
# arrange() => return ndarry(numpy)

x = np.arange(0,12,0.01) # (시작값,종료값,스텝)
y = np.sin(x)

# 선 그래프
plt.figure(figsize=(12,8))
plt.plot(x,y)
plt.plot(x,np.cos(x))
plt.show()
```
![image](https://github.com/user-attachments/assets/1380fccb-9628-4a4b-a64b-d13615244254)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False
# line plot
# range() => return list
# arrange() => return ndarry(numpy)

x = np.arange(0,12,0.01) # (시작값,종료값,스텝)
y = np.sin(x)

# 선 그래프
plt.figure(figsize=(12,8))
plt.plot(x,y)
plt.plot(x,np.cos(x))
plt.title('사인 및 코사인 연습') # 타이틀 표시
plt.grid() # 그리드 표시
plt.show()
```
![image](https://github.com/user-attachments/assets/63dc06e1-ac92-4425-8349-e23953f96f5c)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False
# line plot
# range() => return list
# arrange() => return ndarry(numpy)

x = np.arange(0,12,0.01) # (시작값,종료값,스텝)
y = np.sin(x)

# 선 그래프
plt.figure(figsize=(12,8))
plt.plot(x,y,label='sin')
plt.plot(x,np.cos(x),label='cos')
plt.title('사인 및 코사인 연습') # 타이틀 표시
plt.grid() # 그리드 표시
plt.legend() #범례 표시
plt.show()
```
![image](https://github.com/user-attachments/assets/e5eae0ad-c5e8-4e33-b901-df715541266c)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False
# line plot
# range() => return list
# arrange() => return ndarry(numpy)

x = np.arange(0,12,0.01) # (시작값,종료값,스텝)
y = np.sin(x)

# 선 그래프
plt.figure(figsize=(12,8))
plt.plot(x,y,label='sin')
plt.plot(x,np.cos(x),label='cos')
plt.title('사인 및 코사인 연습') # 타이틀 표시
plt.grid() # 그리드 표시
plt.legend() #범례 표시
plt.xlabel('time')
plt.ylabel('value')
plt.show()
```
![image](https://github.com/user-attachments/assets/abbfc8cd-680c-4064-af25-25110758200d)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False
# line plot
# range() => return list
# arrange() => return ndarry(numpy)

x = np.arange(0,12,0.01) # (시작값,종료값,스텝)
y = np.sin(x)

# 선 그래프
plt.figure(figsize=(12,8))
plt.plot(x,y,label='sin')
plt.plot(x,np.cos(x),label='cos')
plt.title('사인 및 코사인 연습') # 타이틀 표시
plt.grid() # 그리드 표시
plt.legend() #범례 표시
plt.xlabel('time')
plt.ylabel('value')

plt.xlim(0,np.pi) # 파이 까지의 값을 보기

plt.show()
```
![image](https://github.com/user-attachments/assets/c8bb2461-1a64-4c9f-87d9-fcb084d9617c)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False
# line plot
# range() => return list
# arrange() => return ndarry(numpy)

x = np.arange(0,12,0.01) # (시작값,종료값,스텝)
y = np.sin(x)

# 선 그래프
plt.figure(figsize=(12,8))
plt.plot(x,y,label='sin')
plt.plot(x,np.cos(x),label='cos')
plt.title('사인 및 코사인 연습') # 타이틀 표시
plt.grid() # 그리드 표시
plt.legend() #범례 표시
plt.xlabel('time')
plt.ylabel('value')

plt.xlim(0,np.pi) # 파이 까지의 값을 보기

plt.ylim(-2,2) # y축

plt.show()
```
![image](https://github.com/user-attachments/assets/5cb9c6d0-1bbd-4ea1-93c5-4c5707e96203)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False
# line plot
# range() => return list
# arrange() => return ndarry(numpy)

x = np.arange(0,12,0.01) # (시작값,종료값,스텝)
y = np.sin(x)

# 선 그래프
plt.figure(figsize=(12,8))
plt.plot(x,y,label='sin',lw=5) # 선 두께 : lw
plt.plot(x,np.cos(x),label='cos')
plt.title('사인 및 코사인 연습') # 타이틀 표시
plt.grid() # 그리드 표시
plt.legend() #범례 표시
plt.xlabel('time')
plt.ylabel('value')

plt.xlim(0,np.pi) # 파이 까지의 값을 보기

plt.ylim(-2,2) # y축

plt.show()
```
![image](https://github.com/user-attachments/assets/08b033c3-0a09-4e67-84e3-1621488c7cd5)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False
# line plot
# range() => return list
# arrange() => return ndarry(numpy)

x = np.arange(0,12,0.01) # (시작값,종료값,스텝)
y = np.sin(x)

# 선 그래프
plt.figure(figsize=(12,8))
plt.plot(x,y,label='sin',lw=5)
plt.plot(x,np.cos(x),'r',label='cos') #선 색깔 : red
plt.title('사인 및 코사인 연습') # 타이틀 표시
plt.grid() # 그리드 표시
plt.legend() #범례 표시
plt.xlabel('time')
plt.ylabel('value')

plt.xlim(0,np.pi) # 파이 까지의 값을 보기

plt.ylim(-2,2) # y축

plt.show()
```
![image](https://github.com/user-attachments/assets/bd3a614f-bd6d-4af8-9fdb-c5820eb6c5f1)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

# 선의 모양, 두께, 색 지정

#데이터 생성
t = np.arange(0,5,0.5)

#선 그래프
plt.Figure([8,8])
plt.plot(t,t)
plt.show()
```
![image](https://github.com/user-attachments/assets/eb1fd55e-8580-46e2-a23e-0cf7f3c846c3)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

# 선의 모양, 두께, 색 지정

#데이터 생성
t = np.arange(0,5,0.5)

#선 그래프
plt.Figure([8,8])
plt.plot(t,t,'r--') # r:빨간색, -- : dashed
plt.show()
```
![image](https://github.com/user-attachments/assets/1ad14b6a-d9a5-4c49-a44e-7b9413c67e3f)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

# 선의 모양, 두께, 색 지정

#데이터 생성
t = np.arange(0,5,0.5)

#선 그래프
plt.Figure([8,8])
plt.plot(t,t,'r--')
plt.plot(t,t**2,'r--')
plt.show()
```
![image](https://github.com/user-attachments/assets/6265c63d-2a41-451a-b70d-69641462616a)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

# 선의 모양, 두께, 색 지정

#데이터 생성
t = np.arange(0,5,0.5)

#선 그래프
plt.Figure([8,8])
plt.plot(t,t,'r--')
plt.plot(t,t**2,'bs') # b: blue, s : 마커 모양(square)
plt.show()
```
![image](https://github.com/user-attachments/assets/ef3489de-18a3-4b03-852a-aafd04cf1060)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

# 선의 모양, 두께, 색 지정

#데이터 생성
t = np.arange(0,5,0.5)

#선 그래프
plt.Figure([8,8])
plt.plot(t,t,'r--')
plt.plot(t,t**2,'bs') # b: blue, s : square
plt.plot(t,t**3,'g^') # g : green , ^(triangle) : 마커 모양(삼격형)
plt.show()
```
![image](https://github.com/user-attachments/assets/8706ab02-c9e3-40a6-84b9-64efad5f993a)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False


x=[0,1,2,3,4,5,6]
y=[1,4,5,8,9,5,3]

plt.figure(figsize=[10,6])
plt.plot(
    x,y, color='green'
)

plt.show()
```
![image](https://github.com/user-attachments/assets/f540c9d4-1d16-413f-8d45-4e3f99151dcf)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False


x=[0,1,2,3,4,5,6]
y=[1,4,5,8,9,5,3]

plt.figure(figsize=[10,6])
plt.plot(
    x,y, c='green'
)
plt.show()
```
![image](https://github.com/user-attachments/assets/5e5539f5-2a71-4099-aa50-5d91cc65e087)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False


x=[0,1,2,3,4,5,6]
y=[1,4,5,8,9,5,3]

plt.figure(figsize=[10,6])
plt.plot(
    x,y
    , c='green'
    , linewidth=4 # lw=4 동일
)


plt.show()
```
![image](https://github.com/user-attachments/assets/1a4ae962-79bc-4154-bb40-3ebedd294666)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False


x=[0,1,2,3,4,5,6]
y=[1,4,5,8,9,5,3]

plt.figure(figsize=[10,6])
plt.plot(
    x,y
    , c='green'
    , linewidth=4 # lw=4 동일
    , linestyle='dotted' # ls = 'dotted' 랑 동일 ls 값에 solid, dashed, dotted, dashdot
)
plt.show()
```
![image](https://github.com/user-attachments/assets/59152f67-8290-4896-aae0-7acc1c6a1436)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False


x=[0,1,2,3,4,5,6]
y=[1,4,5,8,9,5,3]

plt.figure(figsize=[10,6])
plt.plot(
    x,y
    , c='green'
    , linewidth=4 # lw=4 동일
    , linestyle='dotted' # ls = 'dotted' 랑 동일 ls 값에 solid, dashed, dotted, dashdot
    , marker='o' # 점모양
)


plt.show()
```
![image](https://github.com/user-attachments/assets/5b57f722-284c-4c1e-91e3-8f9f21e954c3)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False


x=[0,1,2,3,4,5,6]
y=[1,4,5,8,9,5,3]

plt.figure(figsize=[10,6])
plt.plot(
    x,y
    , c='green'
    , linewidth=4 # lw=4 동일
    , linestyle='dotted' # ls = 'dotted' 랑 동일 ls 값에 solid, dashed, dotted, dashdot
    , marker='o' # 점모양
    , markeredgecolor='blue' # 점 경계선 색 blue 
    , markerfacecolor='red' #점의 면색 지정 black은 k로 줘야한다
)


plt.show()
```
![image](https://github.com/user-attachments/assets/6e15170d-7d43-4c36-8b26-62a12b04bc72)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False


x=[0,1,2,3,4,5,6]
y=[1,4,5,8,9,5,3]

plt.figure(figsize=[10,6])
plt.plot(
    x,y
    , c='green'
    , linewidth=4 # lw=4 동일
    , linestyle='dotted' # ls = 'dotted' 랑 동일 ls 값에 solid, dashed, dotted, dashdot
    , marker='o' # 점모양
    , markeredgecolor='blue' # 점 경계선 색 blue 
    , markerfacecolor='red' #점의 면색 지정 black은 k로 줘야한다
    , markeredgewidth=3 # 점의 경계선 두께 지정
)


plt.show()
```
![image](https://github.com/user-attachments/assets/7acb3caf-ebc0-44d7-85e6-a9b7561170f5)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False


x=[0,1,2,3,4,5,6]
y=[1,4,5,8,9,5,3]

plt.figure(figsize=[10,6])
plt.plot(
    x,y
    , c='green'
    , linewidth=4 # lw=4 동일
    , linestyle='dotted' # ls = 'dotted' 랑 동일 ls 값에 solid, dashed, dotted, dashdot
    , marker='o' # 점모양
    , markeredgecolor='blue' # 점 경계선 색 blue 
    , markerfacecolor='red' #점의 면색 지정 black은 k로 줘야한다
    , markeredgewidth=3 # 점의 경계선 두께 지정
    , markersize=12 #점의 크기
)


plt.show()
```
![image](https://github.com/user-attachments/assets/077e44b6-0804-48d1-ad62-5d8f4623c606)

### 산점도
- scatter(점찍기) => 데이터 분포 확인시 사용, 데이터의 상관관계 확인

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

x=np.arange(0,10)
y=np.array([9,8,7,9,8,3,2,4,3,4])

plt.figure(figsize=[10,6])
plt.scatter(x,y)
plt.show()
```
![image](https://github.com/user-attachments/assets/85e3858d-5da4-4287-81d2-e5d381536021)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

x1=np.arange(0,10)
x2=np.array([9,8,7,9,8,3,2,4,3,4])
plt.figure(figsize=(10,6))
plt.scatter(x1,x2, marker='>')
plt.show()
```
![image](https://github.com/user-attachments/assets/ddfd5382-a5e2-4e37-a478-c1fcdff45bf6)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False
x1=np.arange(0,10)
x2=np.array([9,8,7,9,8,3,2,4,3,4])
colormap = x1
plt.figure(figsize=(10,6))
plt.scatter(x1,y, s = 50, c = colormap, marker='>')
plt.show()
```
![image](https://github.com/user-attachments/assets/f9bfa978-512d-489a-9c79-49846816e66f)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

x1=np.arange(0,10)
x2=np.array([9,8,7,9,8,3,2,4,3,4])

colormap = x1
plt.figure(figsize=(10,6))
plt.scatter(x1,y, s = 50, c = colormap, marker='>')
plt.colorbar()
plt.show()
```
![image](https://github.com/user-attachments/assets/f82c3c17-adc1-419e-9787-893596d667c6)

### plot

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

s1 = np.random.normal(loc=0, scale=1, size=1000)
s2 = np.random.normal(loc=5, scale=0.5, size=1000)
s3 = np.random.normal(loc=10, scale=2, size=1000)

plt.figure(figsize=(10,6))
plt.plot(s1, label='s1')
plt.plot(s2, label='s2')
plt.plot(s3, label='s3')
plt.legend()
plt.show()
```
![image](https://github.com/user-attachments/assets/981a68bf-acf0-4b8c-a245-d3b1e3e83539)

### box plot

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

s1 = np.random.normal(loc=0, scale=1, size=1000)
s2 = np.random.normal(loc=5, scale=0.5, size=1000)
s3 = np.random.normal(loc=10, scale=2, size=1000)

plt.figure(figsize=(10,6))
plt.boxplot((s1, s2, s3))
plt.grid()
plt.show()
```
![image](https://github.com/user-attachments/assets/7509b9b1-2bed-4e3f-8190-1a60a602914e)

---
## 14. CCTV와 인구현황 그래프로 분석하기

```
# 데이터프레임에서 차트를 구성 할 수 있다.

# 데이터프레임에서 차트를 구성 할 수 있다.

import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['소계'].sort_values(ascending=False).plot(
    kind='bar'
    ,grid=True
    ,figsize=(8,10)
)
plt.show()
```
![image](https://github.com/user-attachments/assets/039f729d-f89f-4b19-ac08-26279bc43866)

```
# 데이터프레임에서 차트를 구성 할 수 있다.

# 데이터프레임에서 차트를 구성 할 수 있다.

import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['소계'].sort_values(ascending=False).plot(
    kind='barh'
    ,grid=True
    ,figsize=(8,10)
    ,color='green'
)
plt.show()
```
![image](https://github.com/user-attachments/assets/b1493127-fe74-4bf6-b80b-cf620879d883)

```
# 데이터 가공 시각화 : 인구대비 CCTV갯수(소계/ 인구수 * 100)
# 데이터프레임에서 차트를 구성 할 수 있다.
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['CCTV비율']=data_result['소계']/data_result['인구수']

data_result
```
![image](https://github.com/user-attachments/assets/9b11c658-fd3b-4aa6-b98c-f358d18d21ff)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['CCTV비율']=data_result['소계']/data_result['인구수']

# 인구수에 비해 CCTV 대수 많은 곳을 분석, 시각화

data_result['CCTV비율'].sort_values().plot(
    kind='barh'
    , grid=True
    , figsize=(8,10)
)
plt.show()
```
![image](https://github.com/user-attachments/assets/7cb0510c-27f9-482c-aa03-bbb072e36ac8)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['CCTV비율']=data_result['소계']/data_result['인구수']

# 데이터를 대표하는 직선 표시 (CCTV와 인구수는 양의 상관관계)
# polyfit : 지정한 특수 차수의 다항식 계수 계산
# poly1d : 계수를 사용한 실제 다항식 생성

# scatter
# 산점도 : 관계를 나타낸다. 인구수 ,소계(CCTV 개수)

plt.Figure(figsize=[8,8])
plt.scatter(
    data_result['인구수']# x축
    , data_result['소계']# y축
    , s=50 #size
)
plt.title('인구대비 CCTV 개수')
plt.xlabel('인구수')
plt.ylabel('CCTV 개수')
plt.grid()
plt.show()
```
![image](https://github.com/user-attachments/assets/4aa681f2-92ac-4938-a5a5-8a80653455be)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['CCTV비율']=data_result['소계']/data_result['인구수']

# 데이터를 대표하는 직선 표시 (CCTV와 인구수는 양의 상관관계)
# polyfit : 지정한 특수 차수의 다항식 계수 계산
# poly1d : 계수를 사용한 실제 다항식 생성

# 직선의 함수 구하기

# 1. 계수 찾기 f(x) = a*x+b에서 a와 b를 찾기 :np.polyfit()
fp1 = np.polyfit(data_result['인구수'],data_result['소계'],1)
print(fp1)
# 2. 위 계수로 1차함수 오브젝트를 생성 : np.poly1d(np.polyfit()의 결과)
```
![image](https://github.com/user-attachments/assets/9c824a03-d1fe-42e8-8071-dfc3dfd71b1a)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['CCTV비율']=data_result['소계']/data_result['인구수']

# 데이터를 대표하는 직선 표시 (CCTV와 인구수는 양의 상관관계)
# polyfit : 지정한 특수 차수의 다항식 계수 계산
# poly1d : 계수를 사용한 실제 다항식 생성

# 직선의 함수 구하기

# 1. 계수 찾기 f(x) = a*x+b에서 a와 b를 찾기 :np.polyfit()
fp1 = np.polyfit(data_result['인구수'],data_result['소계'],1)
# 2. 위 계수로 1차함수 오브젝트를 생성 : np.poly1d(np.polyfit()의 결과)
f1 = np.poly1d(fp1)
fx = np.linspace(100000, 700000, 100)

for pop in np.linspace(1000000,700000,7): # np.linespace(구간시작, 구간 끝, 구간 나누어서 나온 개수)
    print(pop,':',f1(pop))
```
![image](https://github.com/user-attachments/assets/ab9efa33-eb90-4e3d-89e7-d69637b3f431)


```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['CCTV비율']=data_result['소계']/data_result['인구수']

# 데이터를 대표하는 직선 표시 (CCTV와 인구수는 양의 상관관계)
# polyfit : 지정한 특수 차수의 다항식 계수 계산
# poly1d : 계수를 사용한 실제 다항식 생성

# 직선의 함수 구하기

# 1. 계수 찾기 f(x) = a*x+b에서 a와 b를 찾기 :np.polyfit()
fp1 = np.polyfit(data_result['인구수'],data_result['소계'],1)
# 2. 위 계수로 1차함수 오브젝트를 생성 : np.poly1d(np.polyfit()의 결과)
f1 = np.poly1d(fp1)
fx = np.linspace(100000, 700000, 100)

# 직선 함수 추가
plt.figure(figsize=(10,10))
plt.scatter(data_result['인구수'], data_result['소계'], s=50)
plt.plot(fx, f1(fx), ls='dashed', lw=3, color='g')
plt.xlabel('인구수')
plt.ylabel('CCTV')
plt.grid()
plt.show()
```
![image](https://github.com/user-attachments/assets/317c5f29-61d5-485f-a376-809af8dd7d3c)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['CCTV비율']=data_result['소계']/data_result['인구수']

# 데이터를 대표하는 직선 표시 (CCTV와 인구수는 양의 상관관계)
# polyfit : 지정한 특수 차수의 다항식 계수 계산
# poly1d : 계수를 사용한 실제 다항식 생성

# 직선의 함수 구하기

# 1. 계수 찾기 f(x) = a*x+b에서 a와 b를 찾기 :np.polyfit()
fp1 = np.polyfit(data_result['인구수'],data_result['소계'],1)
# 2. 위 계수로 1차함수 오브젝트를 생성 : np.poly1d(np.polyfit()의 결과)
f1 = np.poly1d(fp1)
fx = np.linspace(100000, 700000, 100)


# 오차 구하기 : 너무 많거나 적거나 한 '구' 찾기 
data_result['오차']=np.abs(data_result['소계']-f1(data_result['인구수']))

data_result.sort_values(by='오차',ascending=False)
```
![image](https://github.com/user-attachments/assets/8825094f-5723-4d41-8799-ce1431f6feee)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['CCTV비율']=data_result['소계']/data_result['인구수']

fp1 = np.polyfit(data_result['인구수'],data_result['소계'],1)
f1 = np.poly1d(fp1)
fx = np.linspace(100000, 700000, 100)

data_result['오차']=np.abs(data_result['소계']-f1(data_result['인구수']))


plt.figure(figsize=(10,10))
plt.scatter(data_result['인구수'], data_result['소계'], s=50,c=data_result['오차'])
plt.plot(fx, f1(fx), ls='dashed', lw=3, color='g')
plt.xlabel('인구수')
plt.ylabel('CCTV')
plt.grid()
plt.colorbar()
plt.show()
```
![image](https://github.com/user-attachments/assets/e88b7714-a597-4669-a150-863b718e8200)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['CCTV비율']=data_result['소계']/data_result['인구수']

fp1 = np.polyfit(data_result['인구수'],data_result['소계'],1)
f1 = np.poly1d(fp1)
fx = np.linspace(100000, 700000, 100)

data_result['오차']=np.abs(data_result['소계']-f1(data_result['인구수']))


plt.figure(figsize=(10,10))
plt.scatter(data_result['인구수'], data_result['소계'], s=50,c=data_result['오차'])
plt.plot(fx, f1(fx), ls='dashed', lw=3, color='g')

for n in range(len(data_result.index)): #[0,1,2,3,.....,23,24]
    plt.text(
        data_result['인구수'].iloc[n] # x축 (인구수) n번째 인구수 추출
        , data_result['소계'].iloc[n] # y축 (CCTV 개수) n번째 CCTV 개수 추출
        , data_result.index[n]# 표시할 텍스트(구이름)
        ,fontsize=10
    )

plt.title('인구 대비 CCTV 개수')
plt.xlabel('인구수')
plt.ylabel('CCTV')
plt.grid()
plt.colorbar()
plt.show()
```
![image](https://github.com/user-attachments/assets/a3663983-c290-4955-86f0-5d7b6ec22072)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['CCTV비율']=data_result['소계']/data_result['인구수']

fp1 = np.polyfit(data_result['인구수'],data_result['소계'],1)
f1 = np.poly1d(fp1)
fx = np.linspace(100000, 700000, 100)

data_result['오차']=np.abs(data_result['소계']-f1(data_result['인구수']))


plt.figure(figsize=(10,10))
plt.scatter(data_result['인구수'], data_result['소계'], s=50,c=data_result['오차'])
plt.plot(fx, f1(fx), ls='dashed', lw=3, color='g')

for n in range(len(data_result.index)): #[0,1,2,3,.....,23,24]
    plt.text(
        data_result['인구수'].iloc[n] * 1.02 # x축 (인구수) n번째 인구수 추출하고 오른쪽으로 이동
        , data_result['소계'].iloc[n] * 0.98 # y축 (CCTV 개수) n번째 CCTV 개수 추출,  아래로 이동
        , data_result.index[n]# 표시할 텍스트(구이름)
        ,fontsize=10
    )

plt.title('인구 대비 CCTV 개수')
plt.xlabel('인구수')
plt.ylabel('CCTV')
plt.grid()
plt.colorbar()
plt.show()
```
![image](https://github.com/user-attachments/assets/1f036991-3e13-43d8-9ed0-a4dc70820782)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['CCTV비율']=data_result['소계']/data_result['인구수']

fp1 = np.polyfit(data_result['인구수'],data_result['소계'],1)
f1 = np.poly1d(fp1)
fx = np.linspace(100000, 700000, 100)

data_result['오차']=np.abs(data_result['소계']-f1(data_result['인구수']))


#오차로 정렬한 데이터 프레임 생성

df_sort=data_result.sort_values(by='오차',ascending=False)

df_sort

```
![image](https://github.com/user-attachments/assets/3eceace3-b6db-490f-a139-64bd5bc04886)

```
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
%matplotlib inline
from matplotlib import rcParams # matplotlib 환경설정 모듈
rcParams['font.family'] = 'Malgun Gothic' # 한글 글꼴 설정
rcParams['axes.unicode_minus'] = False

CCTV_Seoul=pd.read_csv(
    './data/01. CCTV 현황 중간 데이터.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul=pd.read_csv(
    './data/01. 인구현황 nan 삭제까지.csv'
    , encoding='utf-8'
    , index_col=0 
)

POP_Seoul['외국인 비율']=(
    POP_Seoul['외국인 수']/POP_Seoul['인구수']
)*100

POP_Seoul['고령자 비율']=(
    POP_Seoul['고령자 수']/POP_Seoul['인구수']
)*100

# CCTV, 인구현황 merge

data_result =pd.merge(
    left=CCTV_Seoul
    , right=POP_Seoul
    , on ='구별'
    ,how='inner'
)

# 불필요한 칼럼 삭제(Series object 삭제)
del data_result['2013년도 이전']
del data_result['2014년']
del data_result['2015년']
del data_result['2016년']

data_result.set_index(
    '구별'
    ,inplace=True
)

data_result['CCTV비율']=data_result['소계']/data_result['인구수']

fp1 = np.polyfit(data_result['인구수'],data_result['소계'],1)
f1 = np.poly1d(fp1)
fx = np.linspace(100000, 700000, 100)

data_result['오차']=np.abs(data_result['소계']-f1(data_result['인구수']))



#오차로 정렬한 데이터 프레임 생성

df_sort=data_result.sort_values(by='오차',ascending=False)

plt.figure(figsize=(10,10))
plt.scatter(data_result['인구수'], data_result['소계'], s=50,c=data_result['오차'])
plt.plot(fx, f1(fx), ls='dashed', lw=3, color='g')

#상위 10개만 출력
for n in range(10): 
    plt.text(
        df_sort['인구수'].iloc[n] * 1.02 # x축 (인구수) n번째 인구수 추출하고 오른쪽으로 이동
        , df_sort['소계'].iloc[n] * 0.98 # y축 (CCTV 개수) n번째 CCTV 개수 추출하고 아래로 이동
        , df_sort.index[n]# 표시할 텍스트(구이름)
        ,fontsize=10
    )

plt.title('인구 대비 CCTV 개수')
plt.xlabel('인구수')
plt.ylabel('CCTV')
plt.grid()
plt.colorbar()
plt.show()
```
![image](https://github.com/user-attachments/assets/8a2cbfd7-2c97-4c87-908a-38964fa763f6)
