# 자전거 대여 수요 예측

[자전거 대여 수요 예측](https://www.kaggle.com/competitions/bike-sharing-demand)

```
import numpy as np
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
%matplotlib inline


import warnings
warnings.filterwarnings("ignore", category=RuntimeWarning)


bike_df = pd.read_csv('./train.csv')
print(bike_df.shape)
bike_df.head(3)
```
![image](https://github.com/user-attachments/assets/d1222015-451f-428d-8416-e93c4e14bdd7)

```
bike_df.info()
```
![image](https://github.com/user-attachments/assets/b21552db-034d-44d2-99c3-fbb042e120cd)

```
# 문자열로 되어 있는 dataetime 피쳐 값을 datetime 타입으로 변환
# bike_df['datetime']=bike_df.datetime.apply(pd.to_datetime)
bike_df['datetime']=bike_df.datetime.apply(pd.to_datetime)

bike_df.info()
```
![image](https://github.com/user-attachments/assets/92bf13fc-cea4-43c0-b848-14c8b0e68386)

```
# year feature 새로 생성
bike_df['year']=bike_df.datetime.apply(lambda x:x.year)
bike_df.info()
```
![image](https://github.com/user-attachments/assets/0ec6f98f-94bc-4922-9373-71c965df66b4)

```
bike_df['year']
```
![image](https://github.com/user-attachments/assets/33251b7b-4cfd-4394-b5a2-4b21533aa945)

```
# month feature 새로 생성
bike_df['month']=bike_df.datetime.apply(lambda x:x.month)
# day feature 새로 생성
bike_df['day']=bike_df.datetime.apply(lambda x:x.day)
# hour feature 새로 생성
bike_df['hour']=bike_df.datetime.apply(lambda x:x.hour)
# minute feature 새로 생성
bike_df['minute']=bike_df.datetime.apply(lambda x:x.minute)
```

```
bike_df.head(20)
```
![image](https://github.com/user-attachments/assets/3f927b99-fd7f-48de-ac58-2d70cb64b85d)

```
# count = casual + registered 이므로 필요한 데이터가 아니다
drop_columns=['datetime','casual','registered','minute']
bike_df.drop(
    drop_columns
    ,axis=1
    ,inplace=True
)

bike_df.columns
```
![image](https://github.com/user-attachments/assets/2fdaa6ce-5add-41d6-980e-5be0e5562c5a)

```
# 피쳐의 분포 확인
cat_features=[
    'year'
    ,'month'
    ,'season'
    ,'weather'
    ,'day'
    ,'hour'
    ,'workingday'
    ,'holiday'
]

# 막대 그래프로 분포 확인
fig,axs=plt.subplots(
    figsize=(15,8)
    ,ncols=4
    ,nrows=2
)

for i, feature in enumerate(cat_features):
    row=int(i/4)
    col=i%4
    sns.barplot(
        data=bike_df
        ,x=feature
        ,y='count'
        ,ax=axs[row][col]
    )
    
plt.show()
```
![image](https://github.com/user-attachments/assets/313c5add-a1ac-4d71-9612-3e1b2cc61f05)

```
bike_df['count'].hist(bins=30)
plt.show()
```
![image](https://github.com/user-attachments/assets/00671770-99dd-431e-ab2e-736825812d42)
